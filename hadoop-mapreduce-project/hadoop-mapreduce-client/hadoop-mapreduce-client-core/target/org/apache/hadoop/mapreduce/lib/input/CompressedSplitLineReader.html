<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="zh">
<head>
<!-- Generated by javadoc (version 1.7.0_71) on Tue Feb 26 11:39:59 CST 2019 -->
<meta http-equiv="Content-Type" content="text/html" charset="UTF-8">
<title>CompressedSplitLineReader (hadoop-mapreduce-client-core 2.6.0 API)</title>
<meta name="date" content="2019-02-26">
<link rel="stylesheet" type="text/css" href="../../../../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="CompressedSplitLineReader (hadoop-mapreduce-client-core 2.6.0 API)";
    }
//-->
</script>
<noscript>
<div>您的浏览器已禁用 JavaScript。</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="跳过导航链接"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="导航">
<li><a href="../../../../../../overview-summary.html">概览</a></li>
<li><a href="package-summary.html">程序包</a></li>
<li class="navBarCell1Rev">类</li>
<li><a href="class-use/CompressedSplitLineReader.html">使用</a></li>
<li><a href="package-tree.html">树</a></li>
<li><a href="../../../../../../deprecated-list.html">已过时</a></li>
<li><a href="../../../../../../index-all.html">索引</a></li>
<li><a href="../../../../../../help-doc.html">帮助</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../../org/apache/hadoop/mapreduce/lib/input/CombineTextInputFormat.html" title="org.apache.hadoop.mapreduce.lib.input中的类"><span class="strong">上一个类</span></a></li>
<li><a href="../../../../../../org/apache/hadoop/mapreduce/lib/input/DelegatingInputFormat.html" title="org.apache.hadoop.mapreduce.lib.input中的类"><span class="strong">下一个类</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../../index.html?org/apache/hadoop/mapreduce/lib/input/CompressedSplitLineReader.html" target="_top">框架</a></li>
<li><a href="CompressedSplitLineReader.html" target="_top">无框架</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../../allclasses-noframe.html">所有类</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>概要:&nbsp;</li>
<li>嵌套&nbsp;|&nbsp;</li>
<li>字段&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">构造器</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">方法</a></li>
</ul>
<ul class="subNavList">
<li>详细资料:&nbsp;</li>
<li>字段&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">构造器</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">方法</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.apache.hadoop.mapreduce.lib.input</div>
<h2 title="类 CompressedSplitLineReader" class="title">类 CompressedSplitLineReader</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li><a href="http://download.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true" title="java.lang中的类或接口">java.lang.Object</a></li>
<li>
<ul class="inheritance">
<li>org.apache.hadoop.util.LineReader</li>
<li>
<ul class="inheritance">
<li><a href="../../../../../../org/apache/hadoop/mapreduce/lib/input/SplitLineReader.html" title="org.apache.hadoop.mapreduce.lib.input中的类">org.apache.hadoop.mapreduce.lib.input.SplitLineReader</a></li>
<li>
<ul class="inheritance">
<li>org.apache.hadoop.mapreduce.lib.input.CompressedSplitLineReader</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>所有已实现的接口:</dt>
<dd><a href="http://download.oracle.com/javase/6/docs/api/java/io/Closeable.html?is-external=true" title="java.io中的类或接口">Closeable</a>, <a href="http://download.oracle.com/javase/6/docs/api/java/lang/AutoCloseable.html?is-external=true" title="java.lang中的类或接口">AutoCloseable</a></dd>
</dl>
<hr>
<br>
<pre>@InterfaceAudience.Private
@InterfaceStability.Unstable
public class <span class="strong">CompressedSplitLineReader</span>
extends <a href="../../../../../../org/apache/hadoop/mapreduce/lib/input/SplitLineReader.html" title="org.apache.hadoop.mapreduce.lib.input中的类">SplitLineReader</a></pre>
<div class="block">Line reader for compressed splits

 Reading records from a compressed split is tricky, as the
 LineRecordReader is using the reported compressed input stream
 position directly to determine when a split has ended.  In addition the
 compressed input stream is usually faking the actual byte position, often
 updating it only after the first compressed block after the split is
 accessed.

 Depending upon where the last compressed block of the split ends relative
 to the record delimiters it can be easy to accidentally drop the last
 record or duplicate the last record between this split and the next.

 Split end scenarios:

 1) Last block of split ends in the middle of a record
      Nothing special that needs to be done here, since the compressed input
      stream will report a position after the split end once the record
      is fully read.  The consumer of the next split will discard the
      partial record at the start of the split normally, and no data is lost
      or duplicated between the splits.

 2) Last block of split ends in the middle of a delimiter
      The line reader will continue to consume bytes into the next block to
      locate the end of the delimiter.  If a custom delimiter is being used
      then the next record must be read by this split or it will be dropped.
      The consumer of the next split will not recognize the partial
      delimiter at the beginning of its split and will discard it along with
      the next record.

      However for the default delimiter processing there is a special case
      because CR, LF, and CRLF are all valid record delimiters.  If the
      block ends with a CR then the reader must peek at the next byte to see
      if it is an LF and therefore part of the same record delimiter.
      Peeking at the next byte is an access to the next block and triggers
      the stream to report the end of the split.  There are two cases based
      on the next byte:

      A) The next byte is LF
           The split needs to end after the current record is returned.  The
           consumer of the next split will discard the first record, which
           is degenerate since LF is itself a delimiter, and start consuming
           records after that byte.  If the current split tries to read
           another record then the record will be duplicated between splits.

      B) The next byte is not LF
           The current record will be returned but the stream will report
           the split has ended due to the peek into the next block.  If the
           next record is not read then it will be lost, as the consumer of
           the next split will discard it before processing subsequent
           records.  Therefore the next record beyond the reported split end
           must be consumed by this split to avoid data loss.

 3) Last block of split ends at the beginning of a delimiter
      This is equivalent to case 1, as the reader will consume bytes into
      the next block and trigger the end of the split.  No further records
      should be read as the consumer of the next split will discard the
      (degenerate) record at the beginning of its split.

 4) Last block of split ends at the end of a delimiter
      Nothing special needs to be done here. The reader will not start
      examining the bytes into the next block until the next record is read,
      so the stream will not report the end of the split just yet.  Once the
      next record is read then the next block will be accessed and the
      stream will indicate the end of the split.  The consumer of the next
      split will correctly discard the first record of its split, and no
      data is lost or duplicated.

      If the default delimiter is used and the block ends at a CR then this
      is treated as case 2 since the reader does not yet know without
      looking at subsequent bytes whether the delimiter has ended.

 NOTE: It is assumed that compressed input streams *never* return bytes from
       multiple compressed blocks from a single read.  Failure to do so will
       violate the buffering performed by this class, as it will access
       bytes into the next block after the split before returning all of the
       records from the previous block.</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_summary">
<!--   -->
</a>
<h3>构造器概要</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="构造器概要表, 列表构造器和解释">
<caption><span>构造器</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">构造器和说明</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><strong><a href="../../../../../../org/apache/hadoop/mapreduce/lib/input/CompressedSplitLineReader.html#CompressedSplitLineReader(org.apache.hadoop.io.compress.SplitCompressionInputStream,%20org.apache.hadoop.conf.Configuration,%20byte[])">CompressedSplitLineReader</a></strong>(org.apache.hadoop.io.compress.SplitCompressionInputStream&nbsp;in,
                         org.apache.hadoop.conf.Configuration&nbsp;conf,
                         byte[]&nbsp;recordDelimiterBytes)</code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>方法概要</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="方法概要表, 列表方法和解释">
<caption><span>方法</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">限定符和类型</th>
<th class="colLast" scope="col">方法和说明</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected int</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/mapreduce/lib/input/CompressedSplitLineReader.html#fillBuffer(java.io.InputStream,%20byte[],%20boolean)">fillBuffer</a></strong>(<a href="http://download.oracle.com/javase/6/docs/api/java/io/InputStream.html?is-external=true" title="java.io中的类或接口">InputStream</a>&nbsp;in,
          byte[]&nbsp;buffer,
          boolean&nbsp;inDelimiter)</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/mapreduce/lib/input/CompressedSplitLineReader.html#needAdditionalRecordAfterSplit()">needAdditionalRecordAfterSplit</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/mapreduce/lib/input/CompressedSplitLineReader.html#readLine(org.apache.hadoop.io.Text,%20int,%20int)">readLine</a></strong>(org.apache.hadoop.io.Text&nbsp;str,
        int&nbsp;maxLineLength,
        int&nbsp;maxBytesToConsume)</code>&nbsp;</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_org.apache.hadoop.util.LineReader">
<!--   -->
</a>
<h3>从类继承的方法&nbsp;org.apache.hadoop.util.LineReader</h3>
<code>close, readLine, readLine</code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Object">
<!--   -->
</a>
<h3>从类继承的方法&nbsp;java.lang.<a href="http://download.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true" title="java.lang中的类或接口">Object</a></h3>
<code><a href="http://download.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#clone()" title="java.lang中的类或接口">clone</a>, <a href="http://download.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#equals(java.lang.Object)" title="java.lang中的类或接口">equals</a>, <a href="http://download.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#finalize()" title="java.lang中的类或接口">finalize</a>, <a href="http://download.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#getClass()" title="java.lang中的类或接口">getClass</a>, <a href="http://download.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#hashCode()" title="java.lang中的类或接口">hashCode</a>, <a href="http://download.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#notify()" title="java.lang中的类或接口">notify</a>, <a href="http://download.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#notifyAll()" title="java.lang中的类或接口">notifyAll</a>, <a href="http://download.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#toString()" title="java.lang中的类或接口">toString</a>, <a href="http://download.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#wait()" title="java.lang中的类或接口">wait</a>, <a href="http://download.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#wait(long)" title="java.lang中的类或接口">wait</a>, <a href="http://download.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#wait(long,%20int)" title="java.lang中的类或接口">wait</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_detail">
<!--   -->
</a>
<h3>构造器详细资料</h3>
<a name="CompressedSplitLineReader(org.apache.hadoop.io.compress.SplitCompressionInputStream, org.apache.hadoop.conf.Configuration, byte[])">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>CompressedSplitLineReader</h4>
<pre>public&nbsp;CompressedSplitLineReader(org.apache.hadoop.io.compress.SplitCompressionInputStream&nbsp;in,
                         org.apache.hadoop.conf.Configuration&nbsp;conf,
                         byte[]&nbsp;recordDelimiterBytes)
                          throws <a href="http://download.oracle.com/javase/6/docs/api/java/io/IOException.html?is-external=true" title="java.io中的类或接口">IOException</a></pre>
<dl><dt><span class="strong">抛出:</span></dt>
<dd><code><a href="http://download.oracle.com/javase/6/docs/api/java/io/IOException.html?is-external=true" title="java.io中的类或接口">IOException</a></code></dd></dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>方法详细资料</h3>
<a name="fillBuffer(java.io.InputStream, byte[], boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>fillBuffer</h4>
<pre>protected&nbsp;int&nbsp;fillBuffer(<a href="http://download.oracle.com/javase/6/docs/api/java/io/InputStream.html?is-external=true" title="java.io中的类或接口">InputStream</a>&nbsp;in,
             byte[]&nbsp;buffer,
             boolean&nbsp;inDelimiter)
                  throws <a href="http://download.oracle.com/javase/6/docs/api/java/io/IOException.html?is-external=true" title="java.io中的类或接口">IOException</a></pre>
<dl>
<dt><strong>覆盖:</strong></dt>
<dd><code>fillBuffer</code>&nbsp;在类中&nbsp;<code>org.apache.hadoop.util.LineReader</code></dd>
<dt><span class="strong">抛出:</span></dt>
<dd><code><a href="http://download.oracle.com/javase/6/docs/api/java/io/IOException.html?is-external=true" title="java.io中的类或接口">IOException</a></code></dd></dl>
</li>
</ul>
<a name="readLine(org.apache.hadoop.io.Text, int, int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>readLine</h4>
<pre>public&nbsp;int&nbsp;readLine(org.apache.hadoop.io.Text&nbsp;str,
           int&nbsp;maxLineLength,
           int&nbsp;maxBytesToConsume)
             throws <a href="http://download.oracle.com/javase/6/docs/api/java/io/IOException.html?is-external=true" title="java.io中的类或接口">IOException</a></pre>
<dl>
<dt><strong>覆盖:</strong></dt>
<dd><code>readLine</code>&nbsp;在类中&nbsp;<code>org.apache.hadoop.util.LineReader</code></dd>
<dt><span class="strong">抛出:</span></dt>
<dd><code><a href="http://download.oracle.com/javase/6/docs/api/java/io/IOException.html?is-external=true" title="java.io中的类或接口">IOException</a></code></dd></dl>
</li>
</ul>
<a name="needAdditionalRecordAfterSplit()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>needAdditionalRecordAfterSplit</h4>
<pre>public&nbsp;boolean&nbsp;needAdditionalRecordAfterSplit()</pre>
<dl>
<dt><strong>覆盖:</strong></dt>
<dd><code><a href="../../../../../../org/apache/hadoop/mapreduce/lib/input/SplitLineReader.html#needAdditionalRecordAfterSplit()">needAdditionalRecordAfterSplit</a></code>&nbsp;在类中&nbsp;<code><a href="../../../../../../org/apache/hadoop/mapreduce/lib/input/SplitLineReader.html" title="org.apache.hadoop.mapreduce.lib.input中的类">SplitLineReader</a></code></dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="跳过导航链接"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="导航">
<li><a href="../../../../../../overview-summary.html">概览</a></li>
<li><a href="package-summary.html">程序包</a></li>
<li class="navBarCell1Rev">类</li>
<li><a href="class-use/CompressedSplitLineReader.html">使用</a></li>
<li><a href="package-tree.html">树</a></li>
<li><a href="../../../../../../deprecated-list.html">已过时</a></li>
<li><a href="../../../../../../index-all.html">索引</a></li>
<li><a href="../../../../../../help-doc.html">帮助</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../../org/apache/hadoop/mapreduce/lib/input/CombineTextInputFormat.html" title="org.apache.hadoop.mapreduce.lib.input中的类"><span class="strong">上一个类</span></a></li>
<li><a href="../../../../../../org/apache/hadoop/mapreduce/lib/input/DelegatingInputFormat.html" title="org.apache.hadoop.mapreduce.lib.input中的类"><span class="strong">下一个类</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../../index.html?org/apache/hadoop/mapreduce/lib/input/CompressedSplitLineReader.html" target="_top">框架</a></li>
<li><a href="CompressedSplitLineReader.html" target="_top">无框架</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../../allclasses-noframe.html">所有类</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>概要:&nbsp;</li>
<li>嵌套&nbsp;|&nbsp;</li>
<li>字段&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">构造器</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">方法</a></li>
</ul>
<ul class="subNavList">
<li>详细资料:&nbsp;</li>
<li>字段&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">构造器</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">方法</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>Copyright &#169; 2019 <a href="http://www.apache.org">Apache Software Foundation</a>. All Rights Reserved.</small></p>
</body>
</html>
